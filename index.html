<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© - Antigravity</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; font-family: 'Segoe UI', sans-serif; }
        .header-section { background: #2c3e50; color: white; padding: 2rem 0; margin-bottom: 2rem; border-bottom: 5px solid #3498db; }
        .card { border: none; shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .table-container { background: white; padding: 20px; border-radius: 10px; overflow-x: auto; }
        .search-box { margin-bottom: 1.5rem; }
    </style>
</head>
<body>

<div class="header-section text-center">
    <h1>ğŸš€ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</h1>
    <p>Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ø¨Ø¯ÙŠÙ„ Ù„Ù…Ù„Ù Ø§Ù„Ø¥ÙƒØ³ÙŠÙ„</p>
</div>

<div class="container">
    <div class="row search-box">
        <div class="col-md-6 mx-auto">
            <input type="text" id="searchInput" class="form-control form-control-lg" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠ Ø¬Ù‡Ø§Ø² Ø£Ùˆ Ø±Ù‚Ù… ØªØ³Ù„Ø³Ù„ÙŠ...">
        </div>
    </div>

    <div class="table-container shadow">
        <table class="table table-striped table-hover">
            <thead class="table-dark" id="tableHeader">
                </thead>
            <tbody id="tableBody">
                </tbody>
        </table>
    </div>
</div>

<script>
    // ÙˆØ¸ÙŠÙØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù Ø§Ù„Ù€ JSON
    async function loadData() {
        try {
            const response = await fetch('device_traceability.json');
            const data = await response.json();
            
            // Ø³Ù†Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Sheet1 ÙˆÙ‡ÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙÙŠ Ù…Ù„ÙÙƒ 
            const items = data.Sheet1; 

            if (items && items.length > 0) {
                renderTable(items);
            }
        } catch (error) {
            console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", error);
            alert("ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù device_traceability.json ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯!");
        }
    }

    function renderTable(data) {
        const header = document.getElementById('tableHeader');
        const body = document.getElementById('tableBody');
        
        // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        const keys = Object.keys(data[0]);
        header.innerHTML = `<tr>${keys.map(key => `<th>${key}</th>`).join('')}</tr>`;

        // 2. ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØµÙÙˆÙ
        function updateRows(filterData) {
            body.innerHTML = filterData.map(item => `
                <tr>${keys.map(key => `<td>${item[key] || ''}</td>`).join('')}</tr>
            `).join('');
        }

        updateRows(data);

        // 3. Ø¥Ø¶Ø§ÙØ© Ø®Ø§ØµÙŠØ© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù„Ø­Ø¸ÙŠ (Antigravity Search)
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = data.filter(item => 
                Object.values(item).some(val => String(val).toLowerCase().includes(term))
            );
            updateRows(filtered);
        });
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
    loadData();
</script>

</body>
</html>